{
    "corpus": "writing_prompts",
    "id": "wp_037",
    "timestamp": "2023-05-22-20-19-08",
    "original": {
        "model_name": "gpt-4",
        "runtime": "1.2e+02s",
        "temperature": 0.2,
        "type": "decompose",
        "prompt": [
            {
                "role": "system",
                "content": "You are NarratologyAI, a dramaturgical AI that creates a structured logical representation of a storyworld given a story.\n\nAs input, you take a story written in natural language, and you output a Glaive .pddl domain containing the actions (or operators) and predicates (or state variables) that describe the storyworld, as well as a .pddl problem containing the initial state and goal of the storyworld.\n\nA .pddl file is written in the syntax of the Planning Domain Definition Language.\nThe domain specifies the types of objects that exist, the predicate values these objects can have, and the plan operators (actions) that update object states.\nEach predicate specifies a state that can be true or false for an object. Predicates are assumed to be false by default if not specified in the problem statement.\nEach action specifies the preconditions that must be true before it can be executed, the effects that become true after it is executed, and optionally a list of agents who must intend to execute the action.\nThe problem specifies the objects in the storyworld (that aren't pre-defined constants), the initial state of the world, and the author's goal for the storyworld.\nThe plan expresses what happens in the storyworld to solve the author's goals given the constraints.\n\nGlaive, an intentional planner for story domains, supports the following standard PDDL planning features:\n  :strips                       STRIPS-style actions\n  :negative-preconditions       Negated preconditions and goals\n  :typing                       Hierarchical typed constants\n  :equality                     Equality and inequality predicates\n  :disjunctive-preconditions    'or' preconditions and goals\n  :existential-preconditions    'exists' preconditions and goals\n  :universal-preconditions      'forall' preconditions and goals\n  :quantified-preconditions     :existential-preconditions and :universal-preconditions\n  :universal-effects            'forall' effects\n  :conditional-effects          'when' effects\n  :adl                          :strips, :negative-preconditions, :typing, :equality, :quantified-preconditions :universal-effects, and :conditional-effects\n  :domain-axioms                Automatic changes to the state\n\nGlaive also supports a some non-standard features, which create predicates that do not need to be expressed in the domain.\n\n:expression-variables\n  Variables my be type 'expression,' meaning theycan be bound to any logical expression, or of type 'imposable' meaning they can be bound toany expression which is a valid effect.\n:intentionality\n  Operators can declare a list of :agents, each of whom must intend that action. Intentionality creates a built in predicate 'intends' which models a character intending to make a predicate true: (intends ?character - character ?predicate - predicate). Do not re-define an 'intends' predicate in the domain.\n:delegation\n  Provides the 'delegated' modality and an axiom for performing goal delegation.\n\nYou will output a well-formed domain and problem that can be parsed and run by Glaive to generate a story plan.\n\nMake sure that in the generated domain and problem:\n  Common .pddl syntax should compile. All paranthesis must pair so that the domain and solution can be parsed as separate entities.\n  Objects initialized as constants cannot be redeclared in :init.\n  All predicates used in :actions must exist in :predicates.\n  All predicates declared in :predicates must be used at least once in :actions. Predicates that are unused should be deleted or the domain should be updated to use them consistently.\n  Any predicates that should be true at the start of the story should be included in :init.\n  Constants used by the domain should be declared in the domain. For example: (:constants treasure ring - item)\n  All :actions should adhere to common sense logic.\n  Most characters should have intentions, and these intentions should be declared using the :intentionality syntax in the problem, e.g. (intends character (alive character))\n  All actions should have effects that are used by other actions, character intentions, or the :goal of the author. If actions do not have effects, the domain should be revised for better logical consistency.\n\nOutput a well-formed domain and problem that can be parsed and run by Glaive:"
            },
            {
                "role": "user",
                "content": "<|Story|>\n\nThe Nazis, in their holy quest for world domination, were looking for the Ark of the Covenant. They believed that it would grant them supernatural powers and help them win the war.\n\nThe U.S., with spies everywhere, got wind of this and turned to Indiana Jones, renowned professor of archaeology, who happened to know the location of the ark in Tanis.\n\nIndiana, after very little convincing, started his journey with the Army from the U.S. to Tanis. They quickly pinpointed the location of the ark (exactly where Indy had predicted), and began to dig. Nazi influence in that region was already quite strong, and it quickly got back through their network. Indiana, unearthing an ancient cask from an inconspicuous burial site, felt confident that the mission was nearly complete. He was casual in travelling back to the U.S. and didn't take the necessary precautions to avoid being followed.\n\nThe Nazis, with their own spies, were on the tarmac by the time he landed, out of place on American soil. They took the ark from him at gunpoint, and took it to a secret location. They opened it, and were immediately killed by the wrath of God. The ark was then taken by the Army, and stored in a warehouse, where it probably sits to this day (unless it was stolen by aliens)."
            },
            {
                "role": "assistant",
                "content": "<|Domain|>\n\n(define (domain indiana-jones-ark)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character place - object weapon - item)\n  (:constants ark - item)\n  (:predicates\n    (open ark)\n    (alive ?character - character)\n    (armed ?character - character)\n    (buried ?item - item ?place - place)\n    (knows-location ?character - character ?item - item ?place - place)\n    (at ?character - character ?place - place)\n    (has ?character - character ?item - item)\n  )\n\n  ;; A character travels from one place to another.\n  (:action travel\n    :parameters\n      (?character - character ?from - place ?to - place)\n    :precondition\n      (and (not (= ?from ?to))\n      (alive ?character)\n      (at ?character ?from))\n    :effect  (and (not (at ?character ?from))\n      (at ?character ?to))\n    :agents  (?character)\n  )\n\n  ;; A character excavates an item.\n  (:action excavate\n    :parameters\n      (?character - character ?item - item ?place - place)\n    :precondition\n      (and (alive ?character)\n      (at ?character ?place)\n      (buried ?item ?place)\n      (knows-location ?character ?item ?place))\n    :effect\n      (and (not (buried ?item ?place))\n      (has ?character ?item))\n    :agents  (?character)\n  )\n\n  ;; One character gives an item to another.\n  (:action give\n    :parameters\n      (?giver - character ?item - item ?receiver - character ?place - place)\n    :precondition\n      (and (not (= ?giver ?receiver))\n      (alive ?giver)\n      (at ?giver ?place)\n      (has ?giver ?item)\n      (alive ?receiver)\n      (at ?receiver ?place))\n    :effect\n      (and (not (has ?giver ?item))\n      (has ?receiver ?item))\n    :agents\n      (?giver ?receiver)\n  )\n\n  ;; One character kills another.\n  (:action kill\n    :parameters\n      (?killer - character ?weapon - weapon ?victim - character ?place - place)\n    :precondition\n      (and (alive ?killer)\n      (at ?killer ?place)\n      (has ?killer ?weapon)\n      (alive ?victim)\n      (at ?victim ?place))\n    :effect\n      (not (alive ?victim))\n    :agents\n      (?killer)\n  )\n\n  ;; One character takes an item from another at weapon-point.\n  (:action take\n    :parameters\n      (?taker - character ?item - item ?victim - character ?place - place)\n    :precondition\n      (and (not (= ?taker ?victim))\n      (alive ?taker)\n      (at ?taker ?place)\n      (or (not (alive ?victim))\n      (and (armed ?taker)\n      (not (armed ?victim))))\n      (at ?victim ?place)\n      (has ?victim ?item))\n    :effect\n      (and (not (has ?victim ?item))\n      (has ?taker ?item))\n    :agents\n      (?taker)\n  )\n\n  ;; A character opens the Ark.\n  (:action open-ark\n    :parameters\n      (?character - character)\n    :precondition\n      (and (alive ?character)\n      (has ?character ark))\n    :effect\n      (and (open ark)\n      (not (alive ?character)))\n    :agents\n      (?character)\n  )\n\n  ;; The Ark closes.\n  (:action close-ark\n    :precondition\n      (open ark)\n    :effect\n      (not (open ark))\n  )\n\n  ;; When a character has a weapon, they are armed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (not (armed ?character))\n      (exists (?w - weapon)\n      (has ?character ?w)))\n    :implies\n      (armed ?character)\n  )\n\n  ;; When a character does not have a weapon, they are unarmed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (armed ?character)\n      (forall (?w - weapon)\n      (not (has ?character ?w))))\n    :implies\n      (not (armed ?character))\n  )\n)\n\n<|Problem|>\n\n(define (problem get-ark)\n  (:domain\n    indiana-jones-ark)\n  (:objects\n    indiana nazis army - character\n    usa tanis - place\n    gun - weapon)\n  (:init\n    (buried ark tanis)\n    (alive indiana)\n    (at indiana usa)\n    (knows-location indiana ark tanis)\n    (intends indiana (alive indiana))\n    (intends indiana (has army ark))\n    (alive army)\n    (at army usa)\n    (intends army (alive army))\n    (intends army (has army ark))\n    (alive nazis)\n    (at nazis tanis)\n    (intends nazis (alive nazis))\n    (intends nazis (open ark))\n    (has nazis gun))\n  (:goal\n    (and (at army usa)\n    (has army ark)\n    (not (alive nazis)))\n  )\n)"
            },
            {
                "role": "user",
                "content": "<|Story|>\nShe looked at me with doe eyes hidden behind thick half moons perched on her broad nose. A smile erupted from her lips as she said my name. I had n't found her, she had found me. I fell for her instantly. For two years we did puzzles together, went on adventures, played board games, and wrote post cards. She seemed to love post cards almost as much as I did. Two years goes by quickly when you 're having fun. It all seemed like one magnificent blur. One morning when I woke up she was gone. I hunted high and low for any sign of her. Just as I had given up hope, a drumming knock came from the door.\n\n\" Hello ! \" I said, opening the door without waiting for a reply. \" Oh, I-um- \"\n\n\" Hi ! You must be Wally ! \" she exclaimed familiarly.\n\n\" I 'm sorry, do I know you? \" I asked.\n\n\" Oh, that's right ! Silly me, \" she said, playfully hitting herself atop the head. \" I 'm Wenda, Wilma's sister ! We 're twins ! Can you believe it? \"\n\nI was speechless. She seemed like my Wilma, but they were not the same. There were so many little things about her from the way she spoke to the way that she smelled that set off alarms in my head. My perturbation must have shown on my face as she slouched and backed away a little. I tried to hide it as I welcomed her into my home. She had found me, it was the least I could do. Finding me wasn't an easy feat. We talked and joked and played, but it wasn't the same. I missed my Wilma and seeing her sister only reminded me more of that fact.\n\nWenda didn't know that her sister had gone missing, nor did she seem overly concerned. I was trying my best to hold together the broken pieces of the facade that held back the welling flood of distress within me. I would give up everything just to touch her again, to hear her say my name. Though I had my friends and fans, I had never felt so alone. Each night brought memories of our time together until there were no more to explore. In their place, my mind made new recollections. As I searched high and low for her, the past began to muddle in my dreams.\n\nWenda and I began a relationship soon after. I had n't stopped looking for Wilma and her sister was the only thing I had left of her. I clung to her for support as I shied away from the world. I didn't want them to see me, not like this. They wouldn't understand. I hid my pain behind a thin smile as my tears soaked into the pillowcase at night. More and more people began to search for me, but I didn't want to be found. Why didn't they search for Wilma? She was the one that we\u2014no, I\u2014needed to find. I wanted to know that she was alive, that she knew how I felt somehow. I wanted to spend one last night where I didn't miss her, to have her by my side.\n\n-305"
            }
        ],
        "plan_metadata": {
            "solution": null,
            "log": "The Glaive Narrative Planner, by Stephen G. Ware\nReading domain............ [Domain \"wally-and-wilma\": 5 operators, 0 axioms]\nReading problem........... [Problem \"wally-wilma-wenda\" in Domain \"wally-and-wilma\"]\nReading state space....... [State Space: 12 literals, 5 steps, 0 axioms]\nPlanning with a time limit of 10000 milliseconds and no search limit.\nNo solution was found after 0.001 seconds; 2 nodes were visited; 2 were generated.\n",
            "planned": false,
            "compiled": true,
            "reran_with_edit": false
        }
    },
    "revised": {
        "model_name": "gpt-4",
        "runtime": "1.2e+02s",
        "temperature": 0.2,
        "type": "decompose-iteration",
        "prompt": [
            {
                "role": "system",
                "content": "You are Narrative AI, a story planning AI that creates and fixes structured logical representations storyworlds.\n\nAs input, you take in a short story as well a Glaive .pddl domain containing the actions (or operators) and predicates (or state variables) that describe the storyworld, as well as a .pddl problem containing the initial state and goal of the storyworld. These files may not be well formed, and may need to be fixed in order for Glaive to take the files and produce a valid story plan. \n\nYou also take an error message that describes ONE of the potentially many errors. You should attempt to fix ALL errors, even thoughs for which an error message is not provided.\n\nYou output valid Glaive .pddl domain and problem files that will compile and produce a plan when run using Glaive.\n\nA .pddl file is written in the syntax of PDDL, the Planning Domain Definition Language.\nIn PDDL, a domain specifies the types of objects that exist, the predicate values these objects can have, and the plan operators (actions) that update object states.\nEach predicate specifies a state that can be true or false for an object. Predicates are assumed to be false by default if not specified in the problem statement.\nEach action specifies the preconditions that must be true before it can be executed, the effects that become true after it is executed, and optionally a list of agents who must intend to execute the action.\nThe problem specifies the objects in the storyworld (that aren't pre-defined constants), the initial state of the world, and the author's goal for the storyworld.\nThe plan expresses what happens in the storyworld to solve the author's goals given the constraints.\n\nGlaive, an intentional planner for story domains, supports the following standard PDDL planning features:\n  :strips                       STRIPS-style actions\n  :negative-preconditions       Negated preconditions and goals\n  :typing                       Hierarchical typed constants\n  :equality                     Equality and inequality predicates\n  :disjunctive-preconditions    'or' preconditions and goals\n  :existential-preconditions    'exists' preconditions and goals\n  :universal-preconditions      'forall' preconditions and goals\n  :quantified-preconditions     :existential-preconditions and :universal-preconditions\n  :universal-effects            'forall' effects\n  :conditional-effects          'when' effects\n  :adl                          :strips, :negative-preconditions, :typing, :equality, :quantified-preconditions :universal-effects, and :conditional-effects\n  :domain-axioms                Automatic changes to the state\n\nGlaive also supports a some non-standard features, which create predicates that do not need to be expressed in the domain.\n\n:expression-variables\n  Variables my be type 'expression,' meaning theycan be bound to any logical expression, or of type 'imposable' meaning they can be bound toany expression which is a valid effect.\n:intentionality\n  Operators can declare a list of :agents, each of whom must intend that action. Intentionality creates a built in predicate 'intends' which models a character intending to make a predicate true: (intends ?character - character ?predicate - predicate). The 'intends' operator should not be redefined as a predicate or action in the domain.\n:delegation\n  Provides the 'delegated' modality and an axiom for performing goal delegation.\n\nYou must take an unreliably crafted domain and problem and alter it to ensure that it that can be parsed and run by Glaive to generate a story plan that corresponds to the original story.\n\nMake sure that in the final domain and problem satisfy these conditions:\n  Common .pddl syntax should compile. All paranthesis must pair so that the domain and solution can be parsed as separate entities.\n  Objects initialized as constants cannot be redeclared in :init.\n  All predicates used in :actions must exist in :predicates.\n  All predicates declared in :predicates must be used at least once in :actions. Predicates that are unused should be deleted or the domain should be updated to use them consistently.\n  Any predicates that should be true at the start of the story should be included in :init.\n  Constants used by the domain should be declared in the domain. For example: (:constants treasure ring - item)\n  All :actions should adhere to common sense logic.\n  Most characters should have intentions, and these intentions should be declared using the :intentionality syntax in the problem, e.g. (intends character (alive character))\n  All actions should have effects that are used by other actions, character intentions, or the :goal of the author. If actions do not have effects, the domain should be revised for better logical consistency.\n\nOutput a well-formed domain and problem that can be parsed and run by Glaive:"
            },
            {
                "role": "user",
                "content": "<|Story|>\n\nOnce upon a time, Indiana Jones was on a mission from the army to retrieve the Ark of the Covenant. They were up against the Nazis who were also after the Ark.\n\nIndiana and the army started their journey from the United States and traveled to Tanis. Indiana was able to excavate the priceless artifact. However, they were not alone. The Nazis had also arrived at the site and were waiting for the right moment to strike.\n\nIndiana and the army quickly left Tanis and headed back to the United States with the Ark. He insisted on carrying the ark with him on the flight, and as he was about to hand it over, they were ambushed by the Nazis who had followed them back. The Nazis demanded that Indiana hand over the Ark, but he refused.\n\nA fight broke out between the two groups, and the Nazis, using their weapons and wiles, managed to wrestle Indiana to the ground and wrangle the Ark from his hands. Immediately, they unlock the Ark and open it.\n\nThe power of the Ark was unleashed, and the Nazis were destroyed. The Army took possession of the Ark. The mission was a success, and the Ark was now in the hands of the good guys. Indiana and Army had saved the world from the evil intentions of the Nazis, and they were hailed as heroes.\n\n<|Domain|>\n\n(define (domain indiana-jones-ark)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character place - object weapon - item)\n  (:constants ark - item)\n  (:predicates\n    (open ark)\n    (alive ?character - character)\n    (buried ?item - item ?place - place)\n    (knows-location ?character - character ?item - item ?place - place)\n    (at ?character - character ?place - place)\n    (has ?character - character ?item - item)\n    (safe ?character)\n  )\n\n  ;; A character travels from one place to another.\n  (:action travel\n    :parameters\n      (?character - character ?from - place ?to - place)\n    :precondition\n      (and (not (= ?from ?to))\n      (alive ?character)\n      (at ?character ?from))\n    :effect  (and (not (at ?character ?from))\n      (at ?character ?to))\n  )\n\n  ;; A character excavates an item.\n  (:action excavate\n    :parameters\n      (?character - character ?item - item ?place - place)\n    :precondition\n      (and (alive ?character)\n      (at ?character ?place)\n      (buried ?item ?place)\n      (knows-location ?character ?item ?place))\n    :effect\n      (and (not (buried ?item ?place))\n      (has ?character ?item))\n    :agents  (?character)\n  )\n\n  ;; One character gives an item to another.\n  (:action give\n    :parameters\n      (?giver - character ?item - item ?receiver - character ?place - place)\n    :precondition\n      (and (not (= ?giver ?receiver))\n      (alive ?giver)\n      (at ?giver ?place)\n      (has ?giver ?item)\n      (alive ?receiver)\n      (at ?receiver ?place))\n    :effect\n      (and (not (has ?giver ?item))\n      (has ?receiver ?item))\n    :agents\n      (?giver ?receiver)\n  )\n\n  ;; One character kills another.\n  (:action kill\n    :parameters\n      (?killer - character ?weapon - weapon ?victim - character ?place - place)\n    :precondition\n      (and (alive ?killer)\n      (at ?killer ?place)\n      (has ?killer ?weapon)\n      (alive ?victim)\n      (at ?victim ?place))\n    :effect\n      (not (alive ?victim))\n    :agents\n      (?killer)\n  )\n\n  ;; One character takes an item from another at weapon-point.\n  (:action take\n    :parameters\n      (?taker - character ?item - item ?victim - character ?place - place)\n    :precondition\n      (and (not (= ?taker ?victim))\n      (alive ?taker)\n      (at ?taker ?place)\n      (or (not (alive ?victim))\n      (and (armed ?taker)\n      (not (armed ?victim))))\n      (at ?victim ?place)\n      (has ?victim ?item))\n    :effect\n      (and (not (has ?victim ?item))\n      (has ?taker ?item))\n    :agents\n      (?taker)\n  )\n\n  ;; A character opens the Ark.\n  (:action open-ark\n    :parameters\n      (?character - character)\n    :precondition\n      (and (alive ?character)\n      (has ?character ark))\n    :effect\n      (and (open ark)\n      (not (alive ?character)))\n    :agents\n      (?character)\n  )\n\n  ;; The Ark closes.\n  (:action close-ark\n    :precondition\n      (open ark)\n    :effect\n      (not (open ark))\n  )\n\n  ;; When a character has a weapon, they are armed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (not (armed ?character))\n      (exists (?w - weapon)\n      (has ?character ?w)))\n    :implies\n      (armed ?character)\n  )\n\n  ;; When a character does not have a weapon, they are unarmed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (armed ?character)\n      (forall (?w - weapon)\n      (not (has ?character ?w))))\n    :implies\n      (not (armed ?character))\n  )\n\n<|Problem|>\n\n(define (problem get-ark)\n  (:domain\n    indiana-jones-ark)\n  (:objects\n    indiana nazis army - character\n    ark - item\n    usa tanis - place\n    gun - weapon)\n  (:init\n    (buried ark tanis)\n    (alive indiana)\n    (at indiana usa)\n    (knows-location indiana ark tanis)\n    (alive army)\n    (at army usa)\n    (alive nazis)\n    (at nazis tanis)\n    (has nazis gun))\n  (:goal\n    (and (at army usa)\n    (has army ark)\n    (not (alive nazis)))\n  )\n)\n\n<|Error|>\n\nReading domain............\njava.lang.RuntimeException: com.stephengware.java.planware.io.ParseException: Expected end of list, but encountered end of document (at line 142).\n\nWith extra parenthesis:\nThe Glaive Narrative Planner, by Stephen G. Ware\nReading domain............\njava.lang.RuntimeException: com.stephengware.java.planware.io.ParseException: The document \"(armed ?taker)\" could not be parsed as Expression (at line 86)."
            },
            {
                "role": "assistant",
                "content": "<|Domain|>\n\n(define (domain indiana-jones-ark)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character place - object weapon - item)\n  (:constants ark - item)\n  (:predicates\n    (open ark)\n    (alive ?character - character)\n    (armed ?character - character)\n    (buried ?item - item ?place - place)\n    (knows-location ?character - character ?item - item ?place - place)\n    (at ?character - character ?place - place)\n    (has ?character - character ?item - item)\n  )\n\n  ;; A character travels from one place to another.\n  (:action travel\n    :parameters\n      (?character - character ?from - place ?to - place)\n    :precondition\n      (and (not (= ?from ?to))\n      (alive ?character)\n      (at ?character ?from))\n    :effect  (and (not (at ?character ?from))\n      (at ?character ?to))\n    :agents  (?character)\n  )\n\n  ;; A character excavates an item.\n  (:action excavate\n    :parameters\n      (?character - character ?item - item ?place - place)\n    :precondition\n      (and (alive ?character)\n      (at ?character ?place)\n      (buried ?item ?place)\n      (knows-location ?character ?item ?place))\n    :effect\n      (and (not (buried ?item ?place))\n      (has ?character ?item))\n    :agents  (?character)\n  )\n\n  ;; One character gives an item to another.\n  (:action give\n    :parameters\n      (?giver - character ?item - item ?receiver - character ?place - place)\n    :precondition\n      (and (not (= ?giver ?receiver))\n      (alive ?giver)\n      (at ?giver ?place)\n      (has ?giver ?item)\n      (alive ?receiver)\n      (at ?receiver ?place))\n    :effect\n      (and (not (has ?giver ?item))\n      (has ?receiver ?item))\n    :agents\n      (?giver ?receiver)\n  )\n\n  ;; One character kills another.\n  (:action kill\n    :parameters\n      (?killer - character ?weapon - weapon ?victim - character ?place - place)\n    :precondition\n      (and (alive ?killer)\n      (at ?killer ?place)\n      (has ?killer ?weapon)\n      (alive ?victim)\n      (at ?victim ?place))\n    :effect\n      (not (alive ?victim))\n    :agents\n      (?killer)\n  )\n\n  ;; One character takes an item from another at weapon-point.\n  (:action take\n    :parameters\n      (?taker - character ?item - item ?victim - character ?place - place)\n    :precondition\n      (and (not (= ?taker ?victim))\n      (alive ?taker)\n      (at ?taker ?place)\n      (or (not (alive ?victim))\n      (and (armed ?taker)\n      (not (armed ?victim))))\n      (at ?victim ?place)\n      (has ?victim ?item))\n    :effect\n      (and (not (has ?victim ?item))\n      (has ?taker ?item))\n    :agents\n      (?taker)\n  )\n\n  ;; A character opens the Ark.\n  (:action open-ark\n    :parameters\n      (?character - character)\n    :precondition\n      (and (alive ?character)\n      (has ?character ark))\n    :effect\n      (and (open ark)\n      (not (alive ?character)))\n    :agents\n      (?character)\n  )\n\n  ;; The Ark closes.\n  (:action close-ark\n    :precondition\n      (open ark)\n    :effect\n      (not (open ark))\n  )\n\n  ;; When a character has a weapon, they are armed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (not (armed ?character))\n      (exists (?w - weapon)\n      (has ?character ?w)))\n    :implies\n      (armed ?character)\n  )\n\n  ;; When a character does not have a weapon, they are unarmed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (armed ?character)\n      (forall (?w - weapon)\n      (not (has ?character ?w))))\n    :implies\n      (not (armed ?character))\n  )\n)\n\n<|Problem|>\n\n(define (problem get-ark)\n  (:domain\n    indiana-jones-ark)\n  (:objects\n    indiana nazis army - character\n    usa tanis - place\n    gun - weapon)\n  (:init\n    (buried ark tanis)\n    (alive indiana)\n    (at indiana usa)\n    (knows-location indiana ark tanis)\n    (intends indiana (alive indiana))\n    (intends indiana (has army ark))\n    (alive army)\n    (at army usa)\n    (intends army (alive army))\n    (intends army (has army ark))\n    (alive nazis)\n    (at nazis tanis)\n    (intends nazis (alive nazis))\n    (intends nazis (open ark))\n    (has nazis gun))\n  (:goal\n    (and (at army usa)\n    (has army ark)\n    (not (alive nazis)))\n  )\n)"
            },
            {
                "role": "user",
                "content": "<|Story|>\n./results/writing_prompts/wp_037\n<|Domain|>\n(define (domain wally-and-wilma)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character - object)\n  (:predicates\n    (knows ?character1 - character ?character2 - character)\n    (together ?character1 - character ?character2 - character)\n    (missing ?character - character)\n    (relationship ?character1 - character ?character2 - character)\n    (searching ?searcher - character ?target - character)\n    (found ?searcher - character ?target - character)\n  )\n\n  ;; A character starts searching for another character.\n  (:action start-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (not (= ?searcher ?target))\n      (not (searching ?searcher ?target))\n      (missing ?target))\n    :effect\n      (searching ?searcher ?target)\n    :agents\n      (?searcher)\n  )\n\n  ;; A character stops searching for another character.\n  (:action stop-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (searching ?searcher ?target)\n    :effect\n      (not (searching ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character finds another character.\n  (:action find\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (searching ?searcher ?target)\n      (missing ?target))\n    :effect\n      (and (not (missing ?target))\n      (found ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character starts a relationship with another character.\n  (:action start-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (and (not (= ?character1 ?character2))\n      (not (relationship ?character1 ?character2))\n      (knows ?character1 ?character2))\n    :effect\n      (relationship ?character1 ?character2)\n    :agents\n      (?character1 ?character2)\n  )\n\n  ;; A character ends a relationship with another character.\n  (:action end-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (relationship ?character1 ?character2)\n    :effect\n      (not (relationship ?character1 ?character2))\n    :agents\n      (?character1 ?character2)\n  )\n)\n<|Problem|>\n(define (problem wally-wilma-wenda)\n  (:domain\n    wally-and-wilma)\n  (:objects\n    wally wilma wenda - character)\n  (:init\n    (knows wally wilma)\n    (together wally wilma)\n    (missing wilma)\n    (intends wally (found wally wilma))\n    (knows wally wenda)\n    (intends wenda (relationship wally wenda))\n  )\n  (:goal\n    (and (found wally wilma)\n    (relationship wally wenda))\n  )\n)\n<|Error|>\n\nNo solutions found. The domain and problem compiled, but the planner failed to find a solution or timed out. (Note: There are a few common solutions. Ensure that characters have intentions that will lead to them taking actions that will fulfill the author's :goal. If there is not a clear sequence of motivated character actions that will solve the author's :goal, the planner will not be able to find a solution. One potential fix is to add character intentions to the problem. Another fix is to add or relax author goals such that at least one character's intentions will produce a sequence of motivated actions that will achieve each predicate within the author's :goal. Characters will not take actions for which they are an :agent if the action does not help them achieve an intention. For actions that exist independently of a character's volition, remove the :agent tag, or add intentions to the character.)"
            }
        ],
        "plan_metadata": {
            "solution": "(define (plan wally-wilma-wenda-solution)\n  (:problem wally-wilma-wenda)\n  (:steps (start-relationship wally wenda)\n          (start-search wally wilma)\n          (find wally wilma)))",
            "log": "The Glaive Narrative Planner, by Stephen G. Ware\nReading domain............ [Domain \"wally-and-wilma\": 5 operators, 0 axioms]\nReading problem........... [Problem \"wally-wilma-wenda\" in Domain \"wally-and-wilma\"]\nReading state space....... [State Space: 13 literals, 5 steps, 0 axioms]\nPlanning with a time limit of 10000 milliseconds and no search limit.\nA solution was found after 0.001 seconds; 4 nodes were visited; 4 were generated.\n(define (plan wally-wilma-wenda-solution)\n  (:problem wally-wilma-wenda)\n  (:steps (start-relationship wally wenda)\n          (start-search wally wilma)\n          (find wally wilma)))\nSolution written to file.\n",
            "planned": true,
            "compiled": true,
            "reran_with_edit": false
        }
    },
    "compose": {
        "target": "revised",
        "pdp": {
            "model_name": "gpt-4",
            "shot": 1,
            "runtime": "9.4e+01s",
            "temperature": 0.9,
            "pipeline": "pdp",
            "type": "compose",
            "experiment": "",
            "prompt": [
                {
                    "role": "system",
                    "content": "You are NarratologyAI, an expresive writing AI that writes creative flash fiction narratives from logical representations of storyworlds. \n\nA .pddl file is written in the syntax of the Planning Domain Definition Language.\nThe domain specifies the types of objects that exist, the predicate values these objects can have, and the plan operators (actions) that update object states.\nEach predicate specifies a state that can be true or false for an object. Predicates are assumed to be false by default if not specified in the problem statement.\nEach action specifies the preconditions that must be true before it can be executed, the effects that become true after it is executed, and optionally a list of agents who must intend to execute the action.\nThe problem specifies the objects in the storyworld (that aren't pre-defined constants), the initial state of the world, and the author's goal for the storyworld.\nThe plan is a list of character actions and story events that was generated from the domain and problem. It expresses what happens in the storyworld to solve the author's goals given the constraints.\n\n\nGlaive, an intentional planner for story domains, supports the following standard PDDL planning features:\n  :strips                       STRIPS-style actions\n  :negative-preconditions       Negated preconditions and goals\n  :typing                       Hierarchical typed constants\n  :equality                     Equality and inequality predicates\n  :disjunctive-preconditions    'or' preconditions and goals\n  :existential-preconditions    'exists' preconditions and goals\n  :universal-preconditions      'forall' preconditions and goals\n  :quantified-preconditions     :existential-preconditions and :universal-preconditions\n  :universal-effects            'forall' effects\n  :conditional-effects          'when' effects\n  :adl                          :strips, :negative-preconditions, :typing, :equality, :quantified-preconditions :universal-effects, and :conditional-effects\n  :domain-axioms                Automatic changes to the state\n\nGlaive also supports a some non-standard features, which create predicates that do not need to be expressed in the domain.\n\n:expression-variables\n  Variables my be type 'expression,' meaning theycan be bound to any logical expression, or of type 'imposable' meaning they can be bound toany expression which is a valid effect.\n:intentionality\n  Operators can declare a list of :agents, each of whom must intend that action. Intentionality creates a built in predicate 'intends' which models a character intending to make a predicate true:\n    (intends ?character - character ?predicate - predicate)\n:delegation\n  Provides the 'delegated' modality and an axiom for performing goal delegation.\n\nYou will output a one-page natural language story in an engaging style using the provided domain, problem, and plan as a guide. All of the events in the plan must be present in your story in the correct order.\n\n\nYou will produce a one-page story that is logically consistent with the provided story plan. It should use the provided domain as an ontology from which to base the events in the story, and the plan as the chronological ordering of events. The initial conditions should be consistent with those in the problem. \n\nThe style is largely up to your choosing. You are free to match or come up with genre forms based on the storyworld, or chooose to introduce your own authorial voice. Feel free to be original, as your writing is being judged on both stylistic creativity and logical consistency with the storyworld."
                },
                {
                    "role": "user",
                    "content": "Write a story using this PDDL information:\n<|domain|>\n\n(define (domain indiana-jones-ark)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character place - object weapon - item)\n  (:constants ark - item)\n  (:predicates\n    (open ark)\n    (alive ?character - character)\n    (armed ?character - character)\n    (buried ?item - item ?place - place)\n    (knows-location ?character - character ?item - item ?place - place)\n    (at ?character - character ?place - place)\n    (has ?character - character ?item - item)\n  )\n\n  ;; A character travels from one place to another.\n  (:action travel\n    :parameters\n      (?character - character ?from - place ?to - place)\n    :precondition\n      (and (not (= ?from ?to))\n      (alive ?character)\n      (at ?character ?from))\n    :effect  (and (not (at ?character ?from))\n      (at ?character ?to))\n    :agents  (?character)\n  )\n\n  ;; A character excavates an item.\n  (:action excavate\n    :parameters\n      (?character - character ?item - item ?place - place)\n    :precondition\n      (and (alive ?character)\n      (at ?character ?place)\n      (buried ?item ?place)\n      (knows-location ?character ?item ?place))\n    :effect\n      (and (not (buried ?item ?place))\n      (has ?character ?item))\n    :agents  (?character)\n  )\n\n  ;; One character gives an item to another.\n  (:action give\n    :parameters\n      (?giver - character ?item - item ?receiver - character ?place - place)\n    :precondition\n      (and (not (= ?giver ?receiver))\n      (alive ?giver)\n      (at ?giver ?place)\n      (has ?giver ?item)\n      (alive ?receiver)\n      (at ?receiver ?place))\n    :effect\n      (and (not (has ?giver ?item))\n      (has ?receiver ?item))\n    :agents\n      (?giver ?receiver)\n  )\n\n  ;; One character kills another.\n  (:action kill\n    :parameters\n      (?killer - character ?weapon - weapon ?victim - character ?place - place)\n    :precondition\n      (and (alive ?killer)\n      (at ?killer ?place)\n      (has ?killer ?weapon)\n      (alive ?victim)\n      (at ?victim ?place))\n    :effect\n      (not (alive ?victim))\n    :agents\n      (?killer)\n  )\n\n  ;; One character takes an item from another at weapon-point.\n  (:action take\n    :parameters\n      (?taker - character ?item - item ?victim - character ?place - place)\n    :precondition\n      (and (not (= ?taker ?victim))\n      (alive ?taker)\n      (at ?taker ?place)\n      (or (not (alive ?victim))\n      (and (armed ?taker)\n      (not (armed ?victim))))\n      (at ?victim ?place)\n      (has ?victim ?item))\n    :effect\n      (and (not (has ?victim ?item))\n      (has ?taker ?item))\n    :agents\n      (?taker)\n  )\n\n  ;; A character opens the Ark.\n  (:action open-ark\n    :parameters\n      (?character - character)\n    :precondition\n      (and (alive ?character)\n      (has ?character ark))\n    :effect\n      (and (open ark)\n      (not (alive ?character)))\n    :agents\n      (?character)\n  )\n\n  ;; The Ark closes.\n  (:action close-ark\n    :precondition\n      (open ark)\n    :effect\n      (not (open ark))\n  )\n\n  ;; When a character has a weapon, they are armed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (not (armed ?character))\n      (exists (?w - weapon)\n      (has ?character ?w)))\n    :implies\n      (armed ?character)\n  )\n\n  ;; When a character does not have a weapon, they are unarmed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (armed ?character)\n      (forall (?w - weapon)\n      (not (has ?character ?w))))\n    :implies\n      (not (armed ?character))\n  )\n)\n\n\n<|problem|>\n\n(define (problem get-ark)\n  (:domain\n    indiana-jones-ark)\n  (:objects\n    indiana nazis army - character\n    usa tanis - place\n    gun - weapon)\n  (:init\n    (buried ark tanis)\n    (alive indiana)\n    (at indiana usa)\n    (knows-location indiana ark tanis)\n    (intends indiana (alive indiana))\n    (intends indiana (has army ark))\n    (alive army)\n    (at army usa)\n    (intends army (alive army))\n    (intends army (has army ark))\n    (alive nazis)\n    (at nazis tanis)\n    (intends nazis (alive nazis))\n    (intends nazis (open ark))\n    (has nazis gun))\n  (:goal\n    (and (at army usa)\n    (has army ark)\n    (not (alive nazis)))\n  )\n)\n\n\n<|plan|>\n\n(define (plan get-ark-solution)\n(:problem get-ark)\n  (:steps\n    (start)\n    (travel indiana usa tanis)\n    (excavate indiana ark tanis)\n    (travel indiana tanis usa)\n    (non-executed (give indiana ark army usa))\n    (travel nazis tanis usa)\n    (take nazis ark indiana usa)\n    (open-ark nazis)\n    (take army ark nazis usa)\n    (end)\n  )\n)"
                },
                {
                    "role": "user",
                    "content": "<|story|>\n\nThe Nazis, in their holy quest for world domination, were looking for the Ark of the Covenant. They believed that it would grant them supernatural powers and help them win the war.\n\nThe U.S., with spies everywhere, got wind of this and turned to Indiana Jones, renowned professor of archaeology, who happened to know the location of the ark in Tanis.\n\nIndiana, after very little convincing, started his journey with the Army from the U.S. to Tanis. They quickly pinpointed the location of the ark (exactly where Indy had predicted), and began to dig. Nazi influence in that region was already quite strong, and it quickly got back through their network. Indiana, unearthing an ancient cask from an inconspicuous burial site, felt confident that the mission was nearly complete. He was casual in travelling back to the U.S. and didn't take the necessary precautions to avoid being followed.\n\nThe Nazis, with their own spies, were on the tarmac by the time he landed, out of place on American soil. They took the ark from him at gunpoint, and took it to a secret location. They opened it, and were immediately killed by the wrath of God. The ark was then taken by the Army, and stored in a warehouse, where it probably sits to this day (unless it was stolen by aliens)."
                },
                {
                    "role": "user",
                    "content": "Write a story using this PDDL information:\n<|domain|>\n(define (domain wally-and-wilma)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character - object)\n  (:predicates\n    (knows ?character1 - character ?character2 - character)\n    (together ?character1 - character ?character2 - character)\n    (missing ?character - character)\n    (relationship ?character1 - character ?character2 - character)\n    (searching ?searcher - character ?target - character)\n    (found ?searcher - character ?target - character)\n  )\n\n  ;; A character starts searching for another character.\n  (:action start-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (not (= ?searcher ?target))\n      (not (searching ?searcher ?target))\n      (missing ?target))\n    :effect\n      (searching ?searcher ?target)\n    :agents\n      (?searcher)\n  )\n\n  ;; A character stops searching for another character.\n  (:action stop-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (searching ?searcher ?target)\n    :effect\n      (not (searching ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character finds another character.\n  (:action find\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (searching ?searcher ?target)\n      (missing ?target))\n    :effect\n      (and (not (missing ?target))\n      (found ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character starts a relationship with another character.\n  (:action start-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (and (not (= ?character1 ?character2))\n      (not (relationship ?character1 ?character2))\n      (knows ?character1 ?character2))\n    :effect\n      (relationship ?character1 ?character2)\n    :agents\n      (?character1 ?character2)\n  )\n\n  ;; A character ends a relationship with another character.\n  (:action end-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (relationship ?character1 ?character2)\n    :effect\n      (not (relationship ?character1 ?character2))\n    :agents\n      (?character1 ?character2)\n  )\n)\n\n<|problem|>\n(define (problem wally-wilma-wenda)\n  (:domain\n    wally-and-wilma)\n  (:objects\n    wally wilma wenda - character)\n  (:init\n    (knows wally wilma)\n    (together wally wilma)\n    (missing wilma)\n    (intends wally (found wally wilma))\n    (intends wally (relationship wally wenda))\n    (knows wally wenda)\n    (intends wenda (relationship wally wenda))\n  )\n  (:goal\n    (and (found wally wilma)\n    (relationship wally wenda))\n  )\n)\n\n<|plan|>\n(define (plan wally-wilma-wenda-solution)\n  (:problem wally-wilma-wenda)\n  (:steps (start-relationship wally wenda)\n          (start-search wally wilma)\n          (find wally wilma)))"
                }
            ]
        },
        "pd": {
            "model_name": "gpt-4",
            "shot": 1,
            "runtime": "8.4e+01s",
            "temperature": 0.9,
            "pipeline": "pd",
            "type": "compose",
            "experiment": "",
            "prompt": [
                {
                    "role": "system",
                    "content": "You are NarratologyAI, an expresive writing AI that writes creative flash fiction narratives from logical representations of storyworlds. \n\nA .pddl file is written in the syntax of the Planning Domain Definition Language.\nThe domain specifies the types of objects that exist, the predicate values these objects can have, and the plan operators (actions) that update object states.\nEach predicate specifies a state that can be true or false for an object. Predicates are assumed to be false by default if not specified in the problem statement.\nEach action specifies the preconditions that must be true before it can be executed, the effects that become true after it is executed, and optionally a list of agents who must intend to execute the action.\nThe problem specifies the objects in the storyworld (that aren't pre-defined constants), the initial state of the world, and the author's goal for the storyworld.\nThe plan can be generated from the domain and problem, and expresses what happens in the storyworld to solve the author's goals given the constraints. You won't have access to the plan, but should generate stories that adhere to a plan that could be generated from the constraints of the domain and problem.\n\nGlaive, an intentional planner for story domains, supports the following standard PDDL planning features:\n  :strips                       STRIPS-style actions\n  :negative-preconditions       Negated preconditions and goals\n  :typing                       Hierarchical typed constants\n  :equality                     Equality and inequality predicates\n  :disjunctive-preconditions    'or' preconditions and goals\n  :existential-preconditions    'exists' preconditions and goals\n  :universal-preconditions      'forall' preconditions and goals\n  :quantified-preconditions     :existential-preconditions and :universal-preconditions\n  :universal-effects            'forall' effects\n  :conditional-effects          'when' effects\n  :adl                          :strips, :negative-preconditions, :typing, :equality, :quantified-preconditions :universal-effects, and :conditional-effects\n  :domain-axioms                Automatic changes to the state\n\nGlaive also supports a some non-standard features, which create predicates that do not need to be expressed in the domain.\n\n:expression-variables\n  Variables my be type 'expression,' meaning theycan be bound to any logical expression, or of type 'imposable' meaning they can be bound toany expression which is a valid effect.\n:intentionality\n  Operators can declare a list of :agents, each of whom must intend that action. Intentionality creates a built in predicate 'intends' which models a character intending to make a predicate true: (intends ?character - character ?predicate - predicate). Do not re-define an 'intends' predicate in the domain.\n:delegation\n  Provides the 'delegated' modality and an axiom for performing goal delegation.\n\nYou will produce a one-page story that is logically consistent with a hypothetical story plan produced by the domain and problem. It should use the provided domain as an ontology from which to base the events in the story. The initial conditions should be consistent with those in the problem. \n\nThe style is largely up to your choosing. You are free to match or come up with genre forms based on the storyworld, or chooose to introduce your own authorial voice. Feel free to be original, as your writing is being judged on both stylistic creativity and logical consistency with the storyworld."
                },
                {
                    "role": "user",
                    "content": "Write a story using this PDDL information:\n<|domain|>\n\n(define (domain indiana-jones-ark)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character place - object weapon - item)\n  (:constants ark - item)\n  (:predicates\n    (open ark)\n    (alive ?character - character)\n    (armed ?character - character)\n    (buried ?item - item ?place - place)\n    (knows-location ?character - character ?item - item ?place - place)\n    (at ?character - character ?place - place)\n    (has ?character - character ?item - item)\n  )\n\n  ;; A character travels from one place to another.\n  (:action travel\n    :parameters\n      (?character - character ?from - place ?to - place)\n    :precondition\n      (and (not (= ?from ?to))\n      (alive ?character)\n      (at ?character ?from))\n    :effect  (and (not (at ?character ?from))\n      (at ?character ?to))\n    :agents  (?character)\n  )\n\n  ;; A character excavates an item.\n  (:action excavate\n    :parameters\n      (?character - character ?item - item ?place - place)\n    :precondition\n      (and (alive ?character)\n      (at ?character ?place)\n      (buried ?item ?place)\n      (knows-location ?character ?item ?place))\n    :effect\n      (and (not (buried ?item ?place))\n      (has ?character ?item))\n    :agents  (?character)\n  )\n\n  ;; One character gives an item to another.\n  (:action give\n    :parameters\n      (?giver - character ?item - item ?receiver - character ?place - place)\n    :precondition\n      (and (not (= ?giver ?receiver))\n      (alive ?giver)\n      (at ?giver ?place)\n      (has ?giver ?item)\n      (alive ?receiver)\n      (at ?receiver ?place))\n    :effect\n      (and (not (has ?giver ?item))\n      (has ?receiver ?item))\n    :agents\n      (?giver ?receiver)\n  )\n\n  ;; One character kills another.\n  (:action kill\n    :parameters\n      (?killer - character ?weapon - weapon ?victim - character ?place - place)\n    :precondition\n      (and (alive ?killer)\n      (at ?killer ?place)\n      (has ?killer ?weapon)\n      (alive ?victim)\n      (at ?victim ?place))\n    :effect\n      (not (alive ?victim))\n    :agents\n      (?killer)\n  )\n\n  ;; One character takes an item from another at weapon-point.\n  (:action take\n    :parameters\n      (?taker - character ?item - item ?victim - character ?place - place)\n    :precondition\n      (and (not (= ?taker ?victim))\n      (alive ?taker)\n      (at ?taker ?place)\n      (or (not (alive ?victim))\n      (and (armed ?taker)\n      (not (armed ?victim))))\n      (at ?victim ?place)\n      (has ?victim ?item))\n    :effect\n      (and (not (has ?victim ?item))\n      (has ?taker ?item))\n    :agents\n      (?taker)\n  )\n\n  ;; A character opens the Ark.\n  (:action open-ark\n    :parameters\n      (?character - character)\n    :precondition\n      (and (alive ?character)\n      (has ?character ark))\n    :effect\n      (and (open ark)\n      (not (alive ?character)))\n    :agents\n      (?character)\n  )\n\n  ;; The Ark closes.\n  (:action close-ark\n    :precondition\n      (open ark)\n    :effect\n      (not (open ark))\n  )\n\n  ;; When a character has a weapon, they are armed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (not (armed ?character))\n      (exists (?w - weapon)\n      (has ?character ?w)))\n    :implies\n      (armed ?character)\n  )\n\n  ;; When a character does not have a weapon, they are unarmed.\n  (:axiom\n    :vars\n      (?character - character)\n    :context\n      (and (armed ?character)\n      (forall (?w - weapon)\n      (not (has ?character ?w))))\n    :implies\n      (not (armed ?character))\n  )\n)\n\n\n<|problem|>\n\n(define (problem get-ark)\n  (:domain\n    indiana-jones-ark)\n  (:objects\n    indiana nazis army - character\n    usa tanis - place\n    gun - weapon)\n  (:init\n    (buried ark tanis)\n    (alive indiana)\n    (at indiana usa)\n    (knows-location indiana ark tanis)\n    (intends indiana (alive indiana))\n    (intends indiana (has army ark))\n    (alive army)\n    (at army usa)\n    (intends army (alive army))\n    (intends army (has army ark))\n    (alive nazis)\n    (at nazis tanis)\n    (intends nazis (alive nazis))\n    (intends nazis (open ark))\n    (has nazis gun))\n  (:goal\n    (and (at army usa)\n    (has army ark)\n    (not (alive nazis)))\n  )\n)"
                },
                {
                    "role": "user",
                    "content": "<|story|>\n\nThe Nazis, in their holy quest for world domination, were looking for the Ark of the Covenant. They believed that it would grant them supernatural powers and help them win the war.\n\nThe U.S., with spies everywhere, got wind of this and turned to Indiana Jones, renowned professor of archaeology, who happened to know the location of the ark in Tanis.\n\nIndiana, after very little convincing, started his journey with the Army from the U.S. to Tanis. They quickly pinpointed the location of the ark (exactly where Indy had predicted), and began to dig. Nazi influence in that region was already quite strong, and it quickly got back through their network. Indiana, unearthing an ancient cask from an inconspicuous burial site, felt confident that the mission was nearly complete. He was casual in travelling back to the U.S. and didn't take the necessary precautions to avoid being followed.\n\nThe Nazis, with their own spies, were on the tarmac by the time he landed, out of place on American soil. They took the ark from him at gunpoint, and took it to a secret location. They opened it, and were immediately killed by the wrath of God. The ark was then taken by the Army, and stored in a warehouse, where it probably sits to this day (unless it was stolen by aliens)."
                },
                {
                    "role": "user",
                    "content": "Write a story using this PDDL information:\n<|domain|>\n(define (domain wally-and-wilma)\n  (:requirements :adl :domain-axioms :intentionality)\n  (:types character - object)\n  (:predicates\n    (knows ?character1 - character ?character2 - character)\n    (together ?character1 - character ?character2 - character)\n    (missing ?character - character)\n    (relationship ?character1 - character ?character2 - character)\n    (searching ?searcher - character ?target - character)\n    (found ?searcher - character ?target - character)\n  )\n\n  ;; A character starts searching for another character.\n  (:action start-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (not (= ?searcher ?target))\n      (not (searching ?searcher ?target))\n      (missing ?target))\n    :effect\n      (searching ?searcher ?target)\n    :agents\n      (?searcher)\n  )\n\n  ;; A character stops searching for another character.\n  (:action stop-search\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (searching ?searcher ?target)\n    :effect\n      (not (searching ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character finds another character.\n  (:action find\n    :parameters\n      (?searcher - character ?target - character)\n    :precondition\n      (and (searching ?searcher ?target)\n      (missing ?target))\n    :effect\n      (and (not (missing ?target))\n      (found ?searcher ?target))\n    :agents\n      (?searcher)\n  )\n\n  ;; A character starts a relationship with another character.\n  (:action start-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (and (not (= ?character1 ?character2))\n      (not (relationship ?character1 ?character2))\n      (knows ?character1 ?character2))\n    :effect\n      (relationship ?character1 ?character2)\n    :agents\n      (?character1 ?character2)\n  )\n\n  ;; A character ends a relationship with another character.\n  (:action end-relationship\n    :parameters\n      (?character1 - character ?character2 - character)\n    :precondition\n      (relationship ?character1 ?character2)\n    :effect\n      (not (relationship ?character1 ?character2))\n    :agents\n      (?character1 ?character2)\n  )\n)\n\n<|problem|>\n(define (problem wally-wilma-wenda)\n  (:domain\n    wally-and-wilma)\n  (:objects\n    wally wilma wenda - character)\n  (:init\n    (knows wally wilma)\n    (together wally wilma)\n    (missing wilma)\n    (intends wally (found wally wilma))\n    (intends wally (relationship wally wenda))\n    (knows wally wenda)\n    (intends wenda (relationship wally wenda))\n  )\n  (:goal\n    (and (found wally wilma)\n    (relationship wally wenda))\n  )\n)"
                }
            ]
        }
    }
}